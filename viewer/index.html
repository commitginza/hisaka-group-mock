<!DOCTYPE html><html lang="ja">
<head>
<meta charset="utf-8">
<title>PDF ビューワー</title>
<style>
  body      { margin:0; font-family:sans-serif; background:#f5f5f5; text-align:center }
  #toolbar  { padding:1rem; background:#222; color:#fff }
  #pdf-canvas{ width:100%; max-width:960px; margin:1rem auto; background:#fff;
               box-shadow:0 4px 16px rgba(0,0,0,.15) }
  button    { margin:0 .5rem; padding:.4rem 1rem; font-size:1rem; cursor:pointer }
</style>
<script src="https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.min.js"></script>
</head>
<body>

<div id="toolbar">
  <button id="prev">← 前へ</button>
  <span id="page-info"></span>
  <button id="next">次へ →</button>
</div>

<canvas id="pdf-canvas"></canvas>

<script>
const url = "docs/yourfile.pdf";        // ★ PDF ファイルの相対パス
pdfjsLib.GlobalWorkerOptions.workerSrc =
  "https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js";

let pdfDoc = null, pageNum = 1, rendering = false;

const canvas = document.getElementById("pdf-canvas"),
      ctx    = canvas.getContext("2d"),
      info   = document.getElementById("page-info");

function renderPage(num){
  rendering = true;
  pdfDoc.getPage(num).then(page=>{
    const viewport = page.getViewport({ scale: 1.5 });      // 倍率を調整
    canvas.height = viewport.height;
    canvas.width  = viewport.width;
    const renderTask = page.render({ canvasContext: ctx, viewport });
    return renderTask.promise;
  }).then(()=>{
    rendering = false;
    info.textContent = `${pageNum} / ${pdfDoc.numPages}`;
  });
}

function queueRender(num){
  if(rendering) return setTimeout(()=>queueRender(num), 100);
  pageNum = num;
  renderPage(pageNum);
}

document.getElementById("prev").onclick = ()=> {
  if(pageNum<=1) return;
  queueRender(pageNum-1);
};
document.getElementById("next").onclick = ()=> {
  if(pageNum>=pdfDoc.numPages) return;
  queueRender(pageNum+1);
};
document.addEventListener("keydown", e=>{
  if(e.key==="ArrowLeft")  document.getElementById("prev").click();
  if(e.key==="ArrowRight") document.getElementById("next").click();
});

pdfjsLib.getDocument(url).promise.then(pdf=>{
  pdfDoc = pdf;
  renderPage(pageNum);
});
</script>
</body></html>
